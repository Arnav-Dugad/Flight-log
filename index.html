            }
            if (typeof DeviceOrientationEvent !== 'undefined' && typeof DeviceOrientationEvent.requestPermission === 'function') {
                // iOS 13+ devices
                DeviceOrientationEvent.requestPermission()
                    .then(response => {
                        if (response === 'granted') {
                            activateGyro();
                        } else {
                            alert('Permission denied');
                        }
                    })
                    .catch(console.error);
            } else {
                // Non-iOS devices
                activateGyro();
            }
        }
        function activateGyro() {
            if (gyroEnabled) return;
            gyroEnabled = true;
            document.getElementById('gyro-status').innerText = "ON";
            document.getElementById('gyro-status').className = "text-[10px] text-green-400 font-bold uppercase";
            
            window.addEventListener('deviceorientation', handleGyro);
            alert("Motion control enabled! Tilt phone left/right to spin.");
        }
        function handleGyro(event) {
            if (!world || !autoRotate) return;
            
            // Gamma is left/right tilt in degrees (roughly -90 to 90)
            const tilt = event.gamma; 
            if (tilt === null) return;
            // Map tilt to rotation speed
            // Flat (0) = normal speed (0.6)
            // Left tilt (-ve) = faster or reverse
            // Right tilt (+ve) = faster
            
            const baseSpeed = 0.5;
            const sensitivity = 0.05;
            
            const newSpeed = baseSpeed + (tilt * sensitivity);
            world.controls().autoRotateSpeed = newSpeed;
        }
    </script>
</body>
</html>